{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/feder/Desktop/Federico/Dev/Angular/Progetti/connect-to-wallet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { MetamaskHelper } from '../../utils/metamask-helper';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/metamask-wallet/metamask-wallet.service\";\nimport * as i2 from \"@angular/common\";\nexport class HeaderComponent {\n  constructor(metamaskWalletService) {\n    this.metamaskWalletService = metamaskWalletService;\n    this.metamaskWallet$ = this.metamaskWalletService.metamaskWallet;\n  }\n  connectToMetamask() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (MetamaskHelper.metamaskInstalled()) {\n        const accountAddress = yield MetamaskHelper.getAccount(0);\n        if (accountAddress) {\n          const balance = yield MetamaskHelper.getAccountBalance(accountAddress);\n          _this.metamaskWalletService.setMetamaskWallet({\n            address: accountAddress,\n            balance: balance\n          });\n        }\n      } else {\n        console.log('Please install MetaMask!');\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.MetamaskWalletService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    decls: 9,\n    vars: 6,\n    consts: [[1, \"header\", \"p-3\"], [1, \"header-left\"], [1, \"m-0\"], [1, \"header-right\"], [1, \"connect-to-wallet-cta\", 3, \"disabled\", \"click\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \" Connect to Wallet Application \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_5_listener() {\n          return ctx.connectToMetamask();\n        });\n        i0.ɵɵpipe(6, \"async\");\n        i0.ɵɵtext(7);\n        i0.ɵɵpipe(8, \"async\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", !!i0.ɵɵpipeBind1(6, 2, ctx.metamaskWallet$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 4, ctx.metamaskWallet$) ? \"Wallet connected\" : \"Connect to Wallet\", \" \");\n      }\n    },\n    dependencies: [i2.AsyncPipe],\n    styles: [\".header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n.header[_ngcontent-%COMP%]   .connect-to-wallet-cta[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  outline: none;\\n  border: none;\\n  color: white;\\n  background-color: blueviolet;\\n  border-radius: 0.5rem;\\n  padding: 0.5rem 1rem;\\n  font-size: 1.1rem;\\n  font-weight: bold;\\n  border: 2px solid transparent;\\n}\\n.header[_ngcontent-%COMP%]   .connect-to-wallet-cta[_ngcontent-%COMP%]:hover {\\n  background-color: white;\\n  color: blueviolet;\\n  border-color: blueviolet;\\n  transition: all 0.33s;\\n}\\n.header[_ngcontent-%COMP%]   .connect-to-wallet-cta[_ngcontent-%COMP%]:disabled {\\n  pointer-events: none;\\n  opacity: 0.2;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29yZS9jb21wb25lbnRzL2hlYWRlci9oZWFkZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtBQUZGO0FBSUU7RUFDRSxlQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxZQVhPO0VBWVAsNEJBYlk7RUFjWixxQkFBQTtFQUNBLG9CQUFBO0VBQ0EsaUJBQUE7RUFDQSxpQkFBQTtFQUNBLDZCQUFBO0FBRko7QUFLSTtFQUNFLHVCQXJCSztFQXNCTCxpQkF2QlU7RUF3QlYsd0JBeEJVO0VBMEJWLHFCQUFBO0FBSk47QUFPSTtFQUVFLG9CQUFBO0VBQ0EsWUFBQTtBQU5OIiwic291cmNlc0NvbnRlbnQiOlsiJGN0YUJhY2tncm91bmQ6IGJsdWV2aW9sZXQ7XHJcbiRjdGFDb2xvcjogd2hpdGU7XHJcblxyXG4uaGVhZGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cclxuICAuY29ubmVjdC10by13YWxsZXQtY3RhIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBjb2xvcjogJGN0YUNvbG9yO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGN0YUJhY2tncm91bmQ7XHJcbiAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XHJcbiAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcclxuICAgIGZvbnQtc2l6ZTogMS4xcmVtO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuXHJcblxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRjdGFDb2xvcjtcclxuICAgICAgY29sb3I6ICRjdGFCYWNrZ3JvdW5kO1xyXG4gICAgICBib3JkZXItY29sb3I6ICRjdGFCYWNrZ3JvdW5kO1xyXG5cclxuICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMzNzO1xyXG4gICAgfVxyXG5cclxuICAgICY6ZGlzYWJsZWQge1xyXG4gICAgICAvL2JhY2tncm91bmQtY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XHJcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICBvcGFjaXR5OiAwLjI7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":";AACA,SAASA,cAAc,QAAQ,6BAA6B;;;;AAW5D,OAAM,MAAOC,eAAe;EAI1BC,YAAoBC,qBAA4C;IAA5C,0BAAqB,GAArBA,qBAAqB;IACvC,IAAI,CAACC,eAAe,GAAG,IAAI,CAACD,qBAAqB,CAACE,cAAc;EAClE;EAEaC,iBAAiB;IAAA;IAAA;MAC5B,IAAIN,cAAc,CAACO,iBAAiB,EAAE,EAAE;QACtC,MAAMC,cAAc,SAA6BR,cAAc,CAACS,UAAU,CAAC,CAAC,CAAC;QAE7E,IAAID,cAAc,EAAE;UAClB,MAAME,OAAO,SAASV,cAAc,CAACW,iBAAiB,CAACH,cAAc,CAAC;UAEtE,KAAI,CAACL,qBAAqB,CAACS,iBAAiB,CAAC;YAC3CC,OAAO,EAAEL,cAAc;YACvBE,OAAO,EAAEA;WACV,CAAC;;OAEL,MAAM;QACLI,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;;IACxC;EACH;EAAC;qBAvBUd,eAAe;EAAA;EAAA;UAAfA,eAAe;IAAAe;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCZ5BC,8BAAwB;QAGlBA,+CACF;QAAAA,iBAAK;QAEPA,8BAA0B;QAItBA;UAAA,OAASC,uBAAmB;QAAA,EAAC;;QAC7BD,YACF;;QAAAA,iBAAS;;;QAHPA,eAAwC;QAAxCA,sEAAwC;QAExCA,eACF;QADEA,qHACF","names":["MetamaskHelper","HeaderComponent","constructor","metamaskWalletService","metamaskWallet$","metamaskWallet","connectToMetamask","metamaskInstalled","accountAddress","getAccount","balance","getAccountBalance","setMetamaskWallet","address","console","log","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\feder\\Desktop\\Federico\\Dev\\Angular\\Progetti\\connect-to-wallet\\src\\app\\core\\components\\header\\header.component.ts","C:\\Users\\feder\\Desktop\\Federico\\Dev\\Angular\\Progetti\\connect-to-wallet\\src\\app\\core\\components\\header\\header.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { MetamaskHelper } from '../../utils/metamask-helper';\nimport { MetamaskWalletService } from '../../services/metamask-wallet/metamask-wallet.service';\nimport { Observable } from 'rxjs';\nimport { MetamaskWallet } from '../../models/metamask-wallet.models';\n\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent {\n\n  public readonly metamaskWallet$: Observable<MetamaskWallet | null>;\n\n  constructor(private metamaskWalletService: MetamaskWalletService) {\n    this.metamaskWallet$ = this.metamaskWalletService.metamaskWallet;\n  }\n\n  public async connectToMetamask(): Promise<void> {\n    if (MetamaskHelper.metamaskInstalled()) {\n      const accountAddress: string | undefined = await MetamaskHelper.getAccount(0);\n\n      if (accountAddress) {\n        const balance = await MetamaskHelper.getAccountBalance(accountAddress);\n\n        this.metamaskWalletService.setMetamaskWallet({\n          address: accountAddress,\n          balance: balance\n        });\n      }\n    } else {\n      console.log('Please install MetaMask!');\n    }\n  }\n\n}\n","<div class=\"header p-3\">\n  <div class=\"header-left\">\n    <h2 class=\"m-0\">\n      Connect to Wallet Application\n    </h2>\n  </div>\n  <div class=\"header-right\">\n    <button\n      class=\"connect-to-wallet-cta\"\n      [disabled]=\"!!(metamaskWallet$ | async)\"\n      (click)=\"connectToMetamask()\">\n      {{ (metamaskWallet$ | async) ? 'Wallet connected' : 'Connect to Wallet' }}\n    </button>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}